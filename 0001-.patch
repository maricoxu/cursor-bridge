From a1c6f62811b0811c8025f3213dfbdf90c037adf5 Mon Sep 17 00:00:00 2001
From: "xu.marico" <xu.marico>
Date: Wed, 28 May 2025 23:53:08 +0800
Subject: [PATCH] =?UTF-8?q?=E5=AE=8C=E5=96=84=E9=85=8D=E7=BD=AE=E7=AE=A1?=
 =?UTF-8?q?=E7=90=86=E5=92=8C=E5=AE=89=E5=85=A8=E6=80=A7:=20=E6=94=AF?=
 =?UTF-8?q?=E6=8C=81=E6=9C=AC=E5=9C=B0=E9=85=8D=E7=BD=AE=E6=96=87=E4=BB=B6?=
 =?UTF-8?q?=E5=88=86=E7=A6=BB=EF=BC=8C=E4=BF=9D=E6=8A=A4=E6=95=8F=E6=84=9F?=
 =?UTF-8?q?=E4=BF=A1=E6=81=AF=EF=BC=8C=E6=B7=BB=E5=8A=A0=E8=AF=A6=E7=BB=86?=
 =?UTF-8?q?=E9=85=8D=E7=BD=AE=E7=A4=BA=E4=BE=8B=E5=92=8C=E4=BD=BF=E7=94=A8?=
 =?UTF-8?q?=E8=AF=B4=E6=98=8E?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .gitignore                      | 119 ++++-
 CONFIG_EXAMPLES.md              | 356 ++++++++++++++
 README.md                       | 794 +++++++++++---------------------
 cursor_bridge_config.yaml       |  20 +-
 cursor_mcp_config.json          |  14 +-
 install.sh                      | 238 +++++++++-
 src/cursor_bridge/mcp_server.py |  70 ++-
 start_cursor_bridge.sh          |  15 +-
 test_mcp.py                     | 109 +++++
 9 files changed, 1181 insertions(+), 554 deletions(-)
 create mode 100644 CONFIG_EXAMPLES.md
 create mode 100644 test_mcp.py

diff --git a/.gitignore b/.gitignore
index d8fa0ab..063c508 100644
--- a/.gitignore
+++ b/.gitignore
@@ -283,4 +283,121 @@ grafana_data/
 
 # Development tools
 .pre-commit-config.yaml.bak
-.commitizen.yaml.bak
\ No newline at end of file
+.commitizen.yaml.bak
+
+# æ•æ„Ÿé…ç½®æ–‡ä»¶ - åŒ…å«æœåŠ¡å™¨ä¿¡æ¯ï¼Œä¸åº”æäº¤åˆ°git
+cursor_bridge_config.local.yaml
+cursor_bridge_config.*.yaml
+config.local.yaml
+*.local.yaml
+
+# SSHå¯†é’¥æ–‡ä»¶
+*.pem
+*.key
+id_rsa*
+*.ppk
+
+# ç¯å¢ƒå˜é‡æ–‡ä»¶
+.env
+.env.local
+.env.*.local
+
+# Pythonç›¸å…³
+__pycache__/
+*.py[cod]
+*$py.class
+*.so
+.Python
+build/
+develop-eggs/
+dist/
+downloads/
+eggs/
+.eggs/
+lib/
+lib64/
+parts/
+sdist/
+var/
+wheels/
+pip-wheel-metadata/
+share/python-wheels/
+*.egg-info/
+.installed.cfg
+*.egg
+MANIFEST
+
+# è™šæ‹Ÿç¯å¢ƒ
+.venv/
+venv/
+ENV/
+env/
+.env/
+
+# IDEç›¸å…³
+.vscode/
+.idea/
+*.swp
+*.swo
+*~
+
+# æ—¥å¿—æ–‡ä»¶
+*.log
+logs/
+log/
+
+# ä¸´æ—¶æ–‡ä»¶
+*.tmp
+*.temp
+.tmp/
+.temp/
+
+# æ“ä½œç³»ç»Ÿç›¸å…³
+.DS_Store
+.DS_Store?
+._*
+.Spotlight-V100
+.Trashes
+ehthumbs.db
+Thumbs.db
+
+# æµ‹è¯•ç›¸å…³
+.pytest_cache/
+.coverage
+htmlcov/
+.tox/
+.nox/
+coverage.xml
+*.cover
+*.py,cover
+.hypothesis/
+
+# æ–‡æ¡£æ„å»º
+docs/_build/
+.readthedocs.yml
+
+# å¤‡ä»½æ–‡ä»¶
+*.bak
+*.backup
+*.orig
+
+# æ•°æ®åº“æ–‡ä»¶
+*.db
+*.sqlite
+*.sqlite3
+
+# é…ç½®å¤‡ä»½
+config_backup_*
+*.config.bak
+
+# ä¼ä¸šç›¸å…³æ•æ„Ÿä¿¡æ¯
+*company*
+*enterprise*
+*internal*
+*vpn*
+*proxy*
+
+# ä¸ªäººé…ç½®æ–‡ä»¶
+my_*
+personal_*
+private_*
\ No newline at end of file
diff --git a/CONFIG_EXAMPLES.md b/CONFIG_EXAMPLES.md
new file mode 100644
index 0000000..03e6677
--- /dev/null
+++ b/CONFIG_EXAMPLES.md
@@ -0,0 +1,356 @@
+# Cursor Bridge é…ç½®ç¤ºä¾‹
+
+æœ¬æ–‡æ¡£æä¾›äº†å„ç§å¸¸è§åœºæ™¯ä¸‹çš„é…ç½®ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿé…ç½®cursor-bridgeã€‚
+
+## ğŸ”§ åŸºæœ¬é…ç½®æ­¥éª¤
+
+1. **å¤åˆ¶é…ç½®æ¨¡æ¿**
+   ```bash
+   cp cursor_bridge_config.yaml cursor_bridge_config.local.yaml
+   ```
+
+2. **ç¼–è¾‘æœ¬åœ°é…ç½®æ–‡ä»¶**
+   ```bash
+   vim cursor_bridge_config.local.yaml
+   ```
+
+3. **å¯åŠ¨æœåŠ¡**
+   ```bash
+   ./start_cursor_bridge.sh
+   ```
+
+## ğŸ“‹ é…ç½®ç¤ºä¾‹
+
+### 1. é˜¿é‡Œäº‘/è…¾è®¯äº‘æœåŠ¡å™¨ï¼ˆç›´æ¥SSHï¼‰
+
+```yaml
+servers:
+  aliyun-server:
+    type: direct
+    ssh:
+      host: "47.xxx.xxx.xxx"          # ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP
+      port: 22                        # SSHç«¯å£
+      username: "root"                # ç”¨æˆ·å
+      key_file: "~/.ssh/aliyun_rsa"  # SSHç§é’¥è·¯å¾„
+      timeout: 10
+    session:
+      name: "aliyun-dev"
+      working_directory: "/root/projects"
+      environment:
+        TERM: "xterm-256color"
+        LANG: "en_US.UTF-8"
+      shell: "/bin/bash"
+```
+
+### 2. å…¬å¸å†…ç½‘æœåŠ¡å™¨ï¼ˆé€šè¿‡VPNï¼‰
+
+```yaml
+servers:
+  company-dev:
+    type: proxy
+    proxy:
+      command: "cisco-anyconnect"     # VPNå·¥å…·å‘½ä»¤
+      target_host: "10.0.1.100"      # å†…ç½‘æœåŠ¡å™¨IP
+      target_port: 22
+      username: "developer"
+      timeout: 30
+    session:
+      name: "company-session"
+      working_directory: "/home/developer/workspace"
+      environment:
+        TERM: "xterm-256color"
+        NODE_ENV: "development"
+      shell: "/bin/bash"
+```
+
+### 3. é€šè¿‡è·³æ¿æœºè¿æ¥
+
+```yaml
+servers:
+  jump-server:
+    type: proxy
+    proxy:
+      command: "ssh"
+      args: ["-J", "jump@jumphost.company.com", "target@targethost.company.com"]
+      timeout: 20
+    session:
+      name: "jump-session"
+      working_directory: "/home/target/code"
+      environment:
+        TERM: "xterm-256color"
+      shell: "/bin/bash"
+```
+
+### 4. ä½¿ç”¨å¯†ç è®¤è¯ï¼ˆä¸æ¨èï¼‰
+
+```yaml
+servers:
+  password-server:
+    type: direct
+    ssh:
+      host: "192.168.1.100"
+      port: 22
+      username: "user"
+      password: "your-password"       # æ˜æ–‡å¯†ç ï¼Œä¸å®‰å…¨
+      timeout: 10
+    session:
+      name: "password-session"
+      working_directory: "/home/user"
+      shell: "/bin/bash"
+```
+
+### 5. å¤šæœåŠ¡å™¨é…ç½®
+
+```yaml
+servers:
+  # å¼€å‘æœåŠ¡å™¨
+  dev-server:
+    type: direct
+    ssh:
+      host: "dev.company.com"
+      port: 22
+      username: "developer"
+      key_file: "~/.ssh/dev_rsa"
+    session:
+      name: "dev-session"
+      working_directory: "/home/developer/projects"
+      environment:
+        NODE_ENV: "development"
+      shell: "/bin/bash"
+  
+  # æµ‹è¯•æœåŠ¡å™¨
+  test-server:
+    type: direct
+    ssh:
+      host: "test.company.com"
+      port: 22
+      username: "tester"
+      key_file: "~/.ssh/test_rsa"
+    session:
+      name: "test-session"
+      working_directory: "/home/tester/testing"
+      environment:
+        NODE_ENV: "testing"
+      shell: "/bin/bash"
+  
+  # ç”Ÿäº§æœåŠ¡å™¨ï¼ˆåªè¯»ï¼‰
+  prod-server:
+    type: direct
+    ssh:
+      host: "prod.company.com"
+      port: 22
+      username: "readonly"
+      key_file: "~/.ssh/prod_readonly_rsa"
+    session:
+      name: "prod-readonly"
+      working_directory: "/var/log"
+      shell: "/bin/bash"
+```
+
+## ğŸ”’ å®‰å…¨é…ç½®
+
+### SSHå¯†é’¥é…ç½®
+
+```bash
+# ç”Ÿæˆä¸“ç”¨SSHå¯†é’¥
+ssh-keygen -t rsa -b 4096 -f ~/.ssh/cursor_bridge_rsa
+
+# è®¾ç½®æ­£ç¡®çš„æƒé™
+chmod 600 ~/.ssh/cursor_bridge_rsa
+chmod 644 ~/.ssh/cursor_bridge_rsa.pub
+
+# å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨
+ssh-copy-id -i ~/.ssh/cursor_bridge_rsa.pub user@your-server.com
+```
+
+### å‘½ä»¤å®‰å…¨è¿‡æ»¤
+
+```yaml
+security:
+  # å…è®¸çš„å‘½ä»¤ï¼ˆç™½åå•ï¼‰
+  allowed_commands:
+    - "ls"
+    - "cd"
+    - "pwd"
+    - "cat"
+    - "grep"
+    - "find"
+    - "git"
+    - "npm"
+    - "python"
+    - "node"
+    - "docker"
+    - "kubectl"
+    
+  # ç¦æ­¢çš„å‘½ä»¤ï¼ˆé»‘åå•ï¼‰
+  blocked_commands:
+    - "rm -rf /"
+    - "sudo rm"
+    - "mkfs"
+    - "dd if="
+    - "shutdown"
+    - "reboot"
+    - "passwd"
+    - "userdel"
+    
+  # å‘½ä»¤è¶…æ—¶ï¼ˆç§’ï¼‰
+  command_timeout: 300
+  
+  # æœ€å¤§è¾“å‡ºå¤§å°ï¼ˆå­—èŠ‚ï¼‰
+  max_output_size: 10485760  # 10MB
+```
+
+## ğŸŒ ä¼ä¸šVPNå·¥å…·é…ç½®
+
+### Cisco AnyConnect
+
+```yaml
+servers:
+  cisco-server:
+    type: proxy
+    proxy:
+      command: "/opt/cisco/anyconnect/bin/vpn"
+      args: ["-s", "connect", "vpn.company.com"]
+      target_host: "internal.company.com"
+      target_port: 22
+      username: "employee"
+      timeout: 30
+```
+
+### OpenVPN
+
+```yaml
+servers:
+  openvpn-server:
+    type: proxy
+    proxy:
+      command: "openvpn"
+      args: ["--config", "/etc/openvpn/company.ovpn"]
+      target_host: "10.0.0.100"
+      target_port: 22
+      username: "user"
+      timeout: 30
+```
+
+### è‡ªå®šä¹‰VPNè„šæœ¬
+
+```yaml
+servers:
+  custom-vpn:
+    type: proxy
+    proxy:
+      command: "/usr/local/bin/company-vpn-connect"
+      args: ["--profile", "development"]
+      target_host: "dev-internal.company.com"
+      target_port: 22
+      username: "developer"
+      timeout: 45
+```
+
+## ğŸ”§ é«˜çº§é…ç½®
+
+### ç¯å¢ƒå˜é‡é…ç½®
+
+```yaml
+servers:
+  node-server:
+    type: direct
+    ssh:
+      host: "node.company.com"
+      port: 22
+      username: "nodejs"
+      key_file: "~/.ssh/node_rsa"
+    session:
+      name: "node-dev"
+      working_directory: "/home/nodejs/app"
+      environment:
+        NODE_ENV: "development"
+        PORT: "3000"
+        DATABASE_URL: "postgresql://localhost:5432/myapp"
+        REDIS_URL: "redis://localhost:6379"
+        PATH: "/home/nodejs/.nvm/versions/node/v18.17.0/bin:$PATH"
+      shell: "/bin/bash"
+```
+
+### è‡ªå®šä¹‰Shellé…ç½®
+
+```yaml
+servers:
+  zsh-server:
+    type: direct
+    ssh:
+      host: "zsh.company.com"
+      port: 22
+      username: "developer"
+      key_file: "~/.ssh/dev_rsa"
+    session:
+      name: "zsh-session"
+      working_directory: "/home/developer"
+      environment:
+        TERM: "xterm-256color"
+        LANG: "en_US.UTF-8"
+        ZSH: "/home/developer/.oh-my-zsh"
+      shell: "/bin/zsh"
+```
+
+## ğŸ§ª æµ‹è¯•é…ç½®
+
+### æµ‹è¯•SSHè¿æ¥
+
+```bash
+# æ‰‹åŠ¨æµ‹è¯•SSHè¿æ¥
+ssh -i ~/.ssh/your_key user@your-server.com
+
+# æµ‹è¯•VPNå·¥å…·
+your-vpn-tool --test
+
+# æµ‹è¯•cursor-bridgeé…ç½®
+export PYTHONPATH=$PWD/src:$PYTHONPATH
+python3 -m cursor_bridge.cli ping --config cursor_bridge_config.local.yaml
+```
+
+### è°ƒè¯•æ¨¡å¼
+
+```bash
+# å¯ç”¨è¯¦ç»†æ—¥å¿—
+export LOG_LEVEL=DEBUG
+python3 -m cursor_bridge.cli mcp --config cursor_bridge_config.local.yaml
+
+# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
+python3 -m cursor_bridge.cli health --verbose --config cursor_bridge_config.local.yaml
+```
+
+## â— å¸¸è§é—®é¢˜
+
+### 1. SSHè¿æ¥å¤±è´¥
+
+**æ£€æŸ¥é¡¹ç›®ï¼š**
+- SSHå¯†é’¥æƒé™ï¼š`chmod 600 ~/.ssh/your_key`
+- æœåŠ¡å™¨IPå’Œç«¯å£æ˜¯å¦æ­£ç¡®
+- ç”¨æˆ·åæ˜¯å¦æ­£ç¡®
+- é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥
+
+### 2. VPNå·¥å…·æ— æ³•è¿æ¥
+
+**æ£€æŸ¥é¡¹ç›®ï¼š**
+- VPNå·¥å…·è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š`which your-vpn-tool`
+- VPNé…ç½®æ˜¯å¦æ­£ç¡®
+- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
+
+### 3. æƒé™é”™è¯¯
+
+**è§£å†³æ–¹æ¡ˆï¼š**
+```bash
+# ä¿®å¤SSHå¯†é’¥æƒé™
+chmod 600 ~/.ssh/your_key
+chmod 644 ~/.ssh/your_key.pub
+
+# ä¿®å¤é…ç½®æ–‡ä»¶æƒé™
+chmod 600 cursor_bridge_config.local.yaml
+```
+
+## ğŸ“š æ›´å¤šå¸®åŠ©
+
+- [README.md](README.md) - å®Œæ•´æ–‡æ¡£
+- [GitHub Issues](https://github.com/maricoxu/cursor-bridge/issues) - é—®é¢˜åé¦ˆ
+- [é¡¹ç›®ä¸»é¡µ](https://github.com/maricoxu/cursor-bridge) - æœ€æ–°ç‰ˆæœ¬ 
\ No newline at end of file
diff --git a/README.md b/README.md
index aba4635..dd56315 100644
--- a/README.md
+++ b/README.md
@@ -20,389 +20,243 @@ Cursor Bridge æ˜¯ä¸€ä¸ªåŸºäºModel Context Protocol (MCP)çš„è¿œç¨‹ç»ˆç«¯ä»£ç†
 - ğŸ”§ **æ˜“é…ç½®**: YAMLé…ç½®ï¼Œå¼€ç®±å³ç”¨
 - ğŸ“Š **å¯è§‚æµ‹**: å®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
 
-## å¿«é€Ÿå¼€å§‹
+## ğŸš€ å¿«é€Ÿå¼€å§‹
 
-### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
+### ç¬¬ä¸€æ­¥ï¼šå®‰è£…å’Œåˆå§‹åŒ–
 
 ```bash
 # å…‹éš†é¡¹ç›®
 git clone https://github.com/maricoxu/cursor-bridge.git
 cd cursor-bridge
 
-# è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
+# è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
 ./install.sh
 ```
 
 å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
-- æ£€æŸ¥Pythonç¯å¢ƒï¼ˆéœ€è¦Python 3.9+ï¼‰
-- å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…
-- ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶
-- è¿è¡ŒåŸºæœ¬æµ‹è¯•
-- åˆ›å»ºå¯åŠ¨è„šæœ¬
+- âœ… æ£€æŸ¥Pythonç¯å¢ƒï¼ˆéœ€è¦Python 3.9+ï¼‰
+- âœ… å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…
+- âœ… ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶
+- âœ… è‡ªåŠ¨é…ç½®Cursor IDEé›†æˆ
+- âœ… è¿è¡ŒåŸºæœ¬æµ‹è¯•
 
-### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…
+### ç¬¬äºŒæ­¥ï¼šé…ç½®ä½ çš„æœåŠ¡å™¨
 
-```bash
-# å…‹éš†é¡¹ç›®
-git clone https://github.com/maricoxu/cursor-bridge.git
-cd cursor-bridge
+å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦é…ç½®å®é™…çš„æœåŠ¡å™¨è¿æ¥ä¿¡æ¯ï¼š
 
-# å®‰è£…ä¾èµ–
-pip3 install -r requirements.txt
+#### 2.1 å¤åˆ¶é…ç½®æ¨¡æ¿
 
-# ç”Ÿæˆé…ç½®æ–‡ä»¶
-export PYTHONPATH=$PWD/src:$PYTHONPATH
-python3 -m cursor_bridge.cli init-config
+```bash
+# å¤åˆ¶é…ç½®æ¨¡æ¿ï¼ˆä¿æŠ¤æ•æ„Ÿä¿¡æ¯ï¼‰
+cp cursor_bridge_config.yaml cursor_bridge_config.local.yaml
 ```
 
-### é…ç½®æœåŠ¡å™¨
+#### 2.2 ç¼–è¾‘æœ¬åœ°é…ç½®æ–‡ä»¶
 
-ç¼–è¾‘ç”Ÿæˆçš„ `cursor_bridge_config.yaml` æ–‡ä»¶ï¼š
+ç¼–è¾‘ `cursor_bridge_config.local.yaml`ï¼š
 
 ```yaml
-# æœåŠ¡å™¨é…ç½®ç¤ºä¾‹
+# æœåŠ¡å™¨é…ç½® - è¯·æ ¹æ®ä½ çš„å®é™…æƒ…å†µä¿®æ”¹
 servers:
-  # ä¼ä¸šä»£ç†è¿æ¥
-  enterprise-dev:
+  # ç¤ºä¾‹1ï¼šç›´æ¥SSHè¿æ¥
+  my-dev-server:
+    type: direct
+    ssh:
+      host: "192.168.1.100"           # æ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨IP
+      port: 22                        # SSHç«¯å£
+      username: "your-username"       # æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å
+      key_file: "~/.ssh/id_rsa"      # SSHç§é’¥è·¯å¾„
+      # password: "your-password"     # å¦‚æœä½¿ç”¨å¯†ç è®¤è¯
+      timeout: 10
+    session:
+      name: "dev-session"
+      working_directory: "/home/your-username/Code"  # å·¥ä½œç›®å½•
+      environment:
+        TERM: "xterm-256color"
+        LANG: "en_US.UTF-8"
+      shell: "/bin/bash"
+
+  # ç¤ºä¾‹2ï¼šé€šè¿‡ä¼ä¸šVPN/è·³æ¿æœºè¿æ¥
+  company-server:
     type: proxy
     proxy:
-      command: "enterprise-vpn-tool"  # ä½ çš„ä¼ä¸šVPNå·¥å…·å‘½ä»¤
-      target_host: "internal-server.company.com"
+      command: "your-vpn-tool"        # æ›¿æ¢ä¸ºä½ çš„VPNå·¥å…·å‘½ä»¤
+      target_host: "internal.company.com"  # å†…ç½‘æœåŠ¡å™¨åœ°å€
       target_port: 22
-      username: "your-username"
+      username: "your-work-username"
+      timeout: 30
     session:
-      name: "enterprise-dev-session"
+      name: "company-dev-session"
       working_directory: "/home/Code"
-      
-  # ç›´æ¥SSHè¿æ¥
-  direct-server:
+      environment:
+        TERM: "xterm-256color"
+        NODE_ENV: "development"
+      shell: "/bin/bash"
+```
+
+#### 2.3 å¸¸è§é…ç½®åœºæ™¯
+
+**åœºæ™¯1ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘æœåŠ¡å™¨**
+```yaml
+servers:
+  aliyun-server:
     type: direct
     ssh:
-      host: "192.168.1.100"
+      host: "47.xxx.xxx.xxx"          # å…¬ç½‘IP
       port: 22
-      username: "user"
-      key_file: "~/.ssh/id_rsa"
+      username: "root"                # æˆ–å…¶ä»–ç”¨æˆ·
+      key_file: "~/.ssh/aliyun_rsa"  # é˜¿é‡Œäº‘å¯†é’¥
+      timeout: 10
     session:
-      name: "direct-session"
-      working_directory: "/home/user"
+      name: "aliyun-dev"
+      working_directory: "/root/projects"
+      shell: "/bin/bash"
 ```
 
-### å¯åŠ¨æœåŠ¡
-
-```bash
-# ä½¿ç”¨ç”Ÿæˆçš„å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
-./start_cursor_bridge.sh
-
-# æˆ–æ‰‹åŠ¨å¯åŠ¨
-export PYTHONPATH=$PWD/src:$PYTHONPATH
-python3 -m cursor_bridge.cli start --config cursor_bridge_config.yaml
-
-# æˆ–ä½¿ç”¨Docker
-docker run -d -p 8082:8082 -v $(pwd)/config:/app/config cursor-bridge
+**åœºæ™¯2ï¼šå…¬å¸å†…ç½‘æœåŠ¡å™¨ï¼ˆé€šè¿‡VPNï¼‰**
+```yaml
+servers:
+  company-dev:
+    type: proxy
+    proxy:
+      command: "cisco-anyconnect"     # æˆ–å…¶ä»–VPNå·¥å…·
+      target_host: "10.0.1.100"      # å†…ç½‘IP
+      target_port: 22
+      username: "developer"
+      timeout: 30
+    session:
+      name: "company-session"
+      working_directory: "/home/developer/workspace"
+      shell: "/bin/bash"
 ```
 
-### éªŒè¯å®‰è£…
-
-```bash
-# æ£€æŸ¥ç‰ˆæœ¬
-export PYTHONPATH=$PWD/src:$PYTHONPATH
-python3 -m cursor_bridge.cli version
-
-# æµ‹è¯•è¿é€šæ€§
-python3 -m cursor_bridge.cli ping
-
-# æ£€æŸ¥å¥åº·çŠ¶æ€
-python3 -m cursor_bridge.cli health
+**åœºæ™¯3ï¼šé€šè¿‡è·³æ¿æœºè¿æ¥**
+```yaml
+servers:
+  jump-server:
+    type: proxy
+    proxy:
+      command: "ssh"
+      args: ["-J", "jump@jumphost.com", "target@targethost.com"]
+      timeout: 20
+    session:
+      name: "jump-session"
+      working_directory: "/home/target/code"
+      shell: "/bin/bash"
 ```
 
-### Cursor IDE é›†æˆ
-
-#### è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰
-
-å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆ `cursor_mcp_config.json` æ–‡ä»¶ï¼š
+### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨æœåŠ¡
 
 ```bash
-# è¿è¡Œå®‰è£…è„šæœ¬åï¼Œä¼šç”Ÿæˆé…ç½®æ–‡ä»¶
-./install.sh
+# ä½¿ç”¨æœ¬åœ°é…ç½®å¯åŠ¨
+./start_cursor_bridge.sh --config cursor_bridge_config.local.yaml
 
-# æŸ¥çœ‹ç”Ÿæˆçš„é…ç½®
-cat cursor_mcp_config.json
-```
-
-#### æ‰‹åŠ¨é…ç½®
-
-1. **æ‰“å¼€Cursorè®¾ç½®**ï¼š
-   - æŒ‰ `Cmd/Ctrl + ,` æ‰“å¼€è®¾ç½®
-   - æœç´¢ "MCP" æˆ–æ‰¾åˆ° "MCP Servers" é…ç½®
-
-2. **æ·»åŠ é…ç½®**ï¼š
-   å¤åˆ¶ `cursor_mcp_config.json` çš„å†…å®¹åˆ°Cursorçš„MCPé…ç½®ä¸­ï¼š
-
-```json
-{
-  "mcpServers": {
-    "cursor-bridge": {
-      "command": "python3",
-      "args": [
-        "-m", 
-        "cursor_bridge.cli", 
-        "mcp", 
-        "--config", 
-        "/Users/xuyehua/Code/cursor-bridge/cursor_bridge_config.yaml"
-      ],
-      "env": {
-        "PYTHONPATH": "/Users/xuyehua/Code/cursor-bridge/src"
-      }
-    }
-  }
-}
+# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
+export PYTHONPATH=$PWD/src:$PYTHONPATH
+python3 -m cursor_bridge.cli start --config cursor_bridge_config.local.yaml
 ```
 
-3. **é‡å¯Cursor**ï¼š
-   - ä¿å­˜é…ç½®åé‡å¯Cursor IDE
-   - é‡å¯åå°±å¯ä»¥åœ¨Cursorä¸­çœ‹åˆ°cursor-bridgeå·¥å…·äº†
-
-#### éªŒè¯é›†æˆ
+### ç¬¬å››æ­¥ï¼šéªŒè¯é…ç½®
 
 ```bash
-# æµ‹è¯•MCPæœåŠ¡å™¨
+# æ£€æŸ¥æœåŠ¡çŠ¶æ€
 export PYTHONPATH=$PWD/src:$PYTHONPATH
-python3 -m cursor_bridge.cli mcp --config cursor_bridge_config.yaml
-```
-
-## æ¶æ„æ¦‚è§ˆ
+python3 -m cursor_bridge.cli health --config cursor_bridge_config.local.yaml
 
-```
-â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
-â”‚   Cursor IDE    â”‚    â”‚  Cursor Bridge   â”‚    â”‚  Remote Server  â”‚
-â”‚                 â”‚    â”‚      MCP         â”‚    â”‚                 â”‚
-â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
-â”‚  â”‚   Agent   â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”‚ MCP Server  â”‚ â”‚    â”‚  â”‚   tmux    â”‚  â”‚
-â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â”‚ Session   â”‚  â”‚
-â”‚                 â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
-â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”‚ Connection  â”‚â—„â”¼â”€â”€â”€â”€â”¼â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
-â”‚  â”‚ Terminal  â”‚  â”‚    â”‚  â”‚  Manager    â”‚ â”‚    â”‚  â”‚   Shell   â”‚  â”‚
-â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
-â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
+# æµ‹è¯•è¿æ¥
+python3 -m cursor_bridge.cli ping --config cursor_bridge_config.local.yaml
 ```
 
-## ä½¿ç”¨ç¤ºä¾‹
+### ç¬¬äº”æ­¥ï¼šåœ¨Cursorä¸­ä½¿ç”¨
 
-### CLIå‘½ä»¤
+1. **é‡å¯Cursor IDE**ï¼ˆå¦‚æœè¿˜æ²¡é‡å¯çš„è¯ï¼‰
+2. **éªŒè¯é›†æˆ**ï¼šåœ¨Cursorä¸­åº”è¯¥èƒ½çœ‹åˆ°cursor-bridgeå·¥å…·
+3. **å¼€å§‹ä½¿ç”¨**ï¼šç°åœ¨ä½ å¯ä»¥è®©Cursorçš„AIç›´æ¥åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤äº†ï¼
 
-```bash
-# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
-export PYTHONPATH=$PWD/src:$PYTHONPATH
-python3 -m cursor_bridge.cli --help
+## ğŸ¯ åœ¨Cursorä¸­çš„ä½¿ç”¨æ–¹æ³•
 
-# å¯åŠ¨æœåŠ¡å™¨
-python3 -m cursor_bridge.cli start
+### åŸºæœ¬ä½¿ç”¨
 
-# æŸ¥çœ‹é…ç½®
-python3 -m cursor_bridge.cli config
+é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥åœ¨Cursorä¸­è¿™æ ·ä½¿ç”¨ï¼š
 
-# ç”Ÿæˆæ–°é…ç½®æ–‡ä»¶
-python3 -m cursor_bridge.cli init-config --output my_config.yaml
 ```
-
-### MCPå·¥å…·ä½¿ç”¨ï¼ˆå¼€å‘ä¸­ï¼‰
-
-```python
-# Cursor Agent å¯ä»¥ç›´æ¥æ‰§è¡Œè¿œç¨‹å‘½ä»¤
-await execute_command("ls -la /home/Code")
-await execute_command("git status")
-await execute_command("npm run build")
+# ç›´æ¥å‘Šè¯‰Cursor AIï¼š
+"è¯·åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹å½“å‰ç›®å½•çš„æ–‡ä»¶"
+"å¸®æˆ‘åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ git status"
+"åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå®‰è£… npm ä¾èµ–"
+"æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„ Python ç‰ˆæœ¬"
 ```
 
-### å¤šæœåŠ¡å™¨æ”¯æŒï¼ˆå¼€å‘ä¸­ï¼‰
+### é«˜çº§ä½¿ç”¨
 
-```python
-# åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤
-await execute_command("ls", server="enterprise-dev")
-await execute_command("ps aux", server="staging-server")
 ```
-
-### ä¼šè¯ç®¡ç†ï¼ˆå¼€å‘ä¸­ï¼‰
-
-```python
-# åˆ›å»ºæ–°ä¼šè¯
-await create_session("my-project", config={
-    "working_directory": "/home/Code/my-project",
-    "environment": {"NODE_ENV": "development"}
-})
-
-# åœ¨ç‰¹å®šä¼šè¯ä¸­æ‰§è¡Œå‘½ä»¤
-await execute_command("npm start", session="my-project")
+# å¤šæ­¥éª¤æ“ä½œï¼š
+"è¯·åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼š
+1. è¿›å…¥é¡¹ç›®ç›®å½•
+2. æ‹‰å–æœ€æ–°ä»£ç 
+3. å®‰è£…ä¾èµ–
+4. è¿è¡Œæµ‹è¯•"
+
+# è°ƒè¯•å’Œåˆ†æï¼š
+"å¸®æˆ‘åœ¨æœåŠ¡å™¨ä¸Šè°ƒè¯•è¿™ä¸ªé”™è¯¯ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶"
+"åˆ†ææœåŠ¡å™¨çš„æ€§èƒ½ï¼ŒæŸ¥çœ‹CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µ"
 ```
 
-## é¡¹ç›®ç»“æ„
+### ä¸€æ¬¡é…ç½®ï¼Œæ°¸ä¹…ä½¿ç”¨
 
-```
-cursor-bridge/
-â”œâ”€â”€ src/
-â”‚   â”œâ”€â”€ cursor_bridge/
-â”‚   â”‚   â”œâ”€â”€ __init__.py
-â”‚   â”‚   â”œâ”€â”€ server.py              # MCPæœåŠ¡å™¨ä¸»å…¥å£
-â”‚   â”‚   â”œâ”€â”€ connection/            # è¿æ¥ç®¡ç†æ¨¡å—
-â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py         # è¿æ¥ç®¡ç†å™¨
-â”‚   â”‚   â”‚   â”œâ”€â”€ strategies/        # è¿æ¥ç­–ç•¥
-â”‚   â”‚   â”‚   â””â”€â”€ pool.py           # è¿æ¥æ± 
-â”‚   â”‚   â”œâ”€â”€ session/              # ä¼šè¯ç®¡ç†æ¨¡å—
-â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py        # ä¼šè¯ç®¡ç†å™¨
-â”‚   â”‚   â”‚   â”œâ”€â”€ tmux.py          # tmuxä¼šè¯å®ç°
-â”‚   â”‚   â”‚   â””â”€â”€ buffer.py        # è¾“å‡ºç¼“å†²
-â”‚   â”‚   â”œâ”€â”€ executor/             # å‘½ä»¤æ‰§è¡Œæ¨¡å—
-â”‚   â”‚   â”‚   â”œâ”€â”€ command.py        # å‘½ä»¤æ‰§è¡Œå™¨
-â”‚   â”‚   â”‚   â”œâ”€â”€ interactive.py    # äº¤äº’å¼å‘½ä»¤
-â”‚   â”‚   â”‚   â””â”€â”€ history.py       # å‘½ä»¤å†å²
-â”‚   â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
-â”‚   â”‚   â”‚   â”œâ”€â”€ models.py        # é…ç½®æ•°æ®æ¨¡å‹
-â”‚   â”‚   â”‚   â””â”€â”€ loader.py        # é…ç½®åŠ è½½å™¨
-â”‚   â”‚   â””â”€â”€ utils/               # å·¥å…·æ¨¡å—
-â”‚   â”‚       â”œâ”€â”€ logging.py       # æ—¥å¿—å·¥å…·
-â”‚   â”‚       â”œâ”€â”€ security.py      # å®‰å…¨å·¥å…·
-â”‚   â”‚       â””â”€â”€ monitoring.py    # ç›‘æ§å·¥å…·
-â”œâ”€â”€ tests/                       # æµ‹è¯•ä»£ç 
-â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
-â”œâ”€â”€ docs/                        # æ–‡æ¡£
-â”œâ”€â”€ scripts/                     # è„šæœ¬å·¥å…·
-â”œâ”€â”€ docker/                      # Dockeré…ç½®
-â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
-â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®
-â”œâ”€â”€ DESIGN.md                   # è®¾è®¡æ–‡æ¡£
-â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
-```
+âœ… **é…ç½®ä¸€æ¬¡åï¼ŒCursorä¼šè®°ä½ä½ çš„è®¾ç½®**
+- æ¯æ¬¡æ‰“å¼€Cursoréƒ½èƒ½ç›´æ¥ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨
+- ä¸éœ€è¦é‡å¤è¾“å…¥æœåŠ¡å™¨ä¿¡æ¯
+- AIä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤
 
-## å¼€å‘æŒ‡å—
+âœ… **æ™ºèƒ½æœåŠ¡å™¨é€‰æ‹©**
+- å¦‚æœåªé…ç½®äº†ä¸€ä¸ªæœåŠ¡å™¨ï¼ŒAIä¼šè‡ªåŠ¨ä½¿ç”¨å®ƒ
+- å¦‚æœé…ç½®äº†å¤šä¸ªæœåŠ¡å™¨ï¼Œä½ å¯ä»¥æŒ‡å®šï¼š"åœ¨å…¬å¸æœåŠ¡å™¨ä¸Šæ‰§è¡Œ..."
 
-### ç¯å¢ƒå‡†å¤‡
+## ğŸ”’ å®‰å…¨é…ç½®æŒ‡å—
 
-```bash
-# å®‰è£…å¼€å‘ä¾èµ–
-poetry install --with dev
+### ä¿æŠ¤æ•æ„Ÿä¿¡æ¯
 
-# å®‰è£…pre-commité’©å­
-pre-commit install
+ä¸ºäº†ä¿æŠ¤ä½ çš„æœåŠ¡å™¨ä¿¡æ¯ä¸è¢«æ„å¤–æäº¤åˆ°GitHubï¼Œæˆ‘ä»¬å»ºè®®ï¼š
 
-# è¿è¡Œæµ‹è¯•
-pytest
+#### 1. ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶
 
-# ä»£ç æ ¼å¼åŒ–
-black src/ tests/
-isort src/ tests/
+```bash
+# å¤åˆ¶é…ç½®æ¨¡æ¿
+cp cursor_bridge_config.yaml cursor_bridge_config.local.yaml
 
-# ç±»å‹æ£€æŸ¥
-mypy src/
+# ç¼–è¾‘æœ¬åœ°é…ç½®ï¼ˆè¿™ä¸ªæ–‡ä»¶ä¸ä¼šè¢«æäº¤åˆ°gitï¼‰
+vim cursor_bridge_config.local.yaml
 ```
 
-### æ·»åŠ æ–°çš„è¿æ¥ç­–ç•¥
+#### 2. é…ç½®ç¯å¢ƒå˜é‡
 
-```python
-# src/cursor_bridge/connection/strategies/custom.py
-from .base import ConnectionStrategy
-
-class CustomConnectionStrategy(ConnectionStrategy):
-    async def connect(self, config: ServerConfig) -> Connection:
-        # å®ç°è‡ªå®šä¹‰è¿æ¥é€»è¾‘
-        pass
-    
-    async def health_check(self, connection: Connection) -> bool:
-        # å®ç°å¥åº·æ£€æŸ¥
-        pass
+```bash
+# åœ¨ ~/.bashrc æˆ– ~/.zshrc ä¸­æ·»åŠ ï¼š
+export CURSOR_BRIDGE_CONFIG="/path/to/cursor_bridge_config.local.yaml"
+export CURSOR_BRIDGE_SSH_KEY="/path/to/your/private/key"
 ```
 
-### æ‰©å±•MCPå·¥å…·
+#### 3. ä½¿ç”¨SSHå¯†é’¥è®¤è¯ï¼ˆæ¨èï¼‰
+
+```bash
+# ç”ŸæˆSSHå¯†é’¥å¯¹
+ssh-keygen -t rsa -b 4096 -f ~/.ssh/cursor_bridge_rsa
 
-```python
-# src/cursor_bridge/tools/custom.py
-from mcp import tool
+# å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨
+ssh-copy-id -i ~/.ssh/cursor_bridge_rsa.pub user@your-server.com
 
-@tool("custom_command")
-async def custom_command(param: str) -> str:
-    """è‡ªå®šä¹‰MCPå·¥å…·"""
-    # å®ç°è‡ªå®šä¹‰åŠŸèƒ½
-    return result
+# åœ¨é…ç½®ä¸­ä½¿ç”¨ç§é’¥
+key_file: "~/.ssh/cursor_bridge_rsa"
 ```
 
-## é…ç½®å‚è€ƒ
+### å‘½ä»¤å®‰å…¨è¿‡æ»¤
 
-### å®Œæ•´é…ç½®ç¤ºä¾‹
+åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å®‰å…¨ç­–ç•¥ï¼š
 
 ```yaml
-# æœåŠ¡å™¨é…ç½®
-servers:
-  # é€šè¿‡ä¼ä¸šVPNå·¥å…·è¿æ¥çš„æœåŠ¡å™¨
-  enterprise-dev:
-    type: proxy
-    proxy:
-      command: enterprise-vpn-tool
-      target_host: internal-server.company.com
-      target_port: 22
-      username: your-username
-      timeout: 30
-    session:
-      name: enterprise-dev-session
-      working_directory: /home/Code
-      environment:
-        TERM: xterm-256color
-        LANG: en_US.UTF-8
-      shell: /bin/bash
-      
-  # ç›´æ¥SSHè¿æ¥çš„æœåŠ¡å™¨
-  direct-server:
-    type: direct
-    ssh:
-      host: direct-server.com
-      port: 22
-      username: user
-      key_file: ~/.ssh/id_rsa
-      timeout: 10
-    session:
-      name: direct-session
-      working_directory: /home/user
-      
-  # é€šè¿‡ä»£ç†è¿æ¥çš„æœåŠ¡å™¨
-  proxy-server:
-    type: proxy
-    proxy:
-      host: proxy.company.com
-      port: 8080
-      username: proxy-user
-    target:
-      host: internal-server.com
-      port: 22
-      username: target-user
-
-# MCPæœåŠ¡å™¨é…ç½®
-mcp:
-  server:
-    host: localhost
-    port: 8082
-    log_level: INFO
-    max_connections: 100
-    
-  features:
-    command_history: true
-    session_persistence: true
-    auto_reconnect: true
-    health_check_interval: 30
-    command_timeout: 300
-    
-  tools:
-    - execute_command
-    - get_session_status
-    - create_session
-    - destroy_session
-    - list_sessions
-    
-  resources:
-    - session_logs
-    - command_history
-    - server_status
-
-# å®‰å…¨é…ç½®
 security:
-  # å‘½ä»¤ç™½åå•
+  # å…è®¸çš„å‘½ä»¤ï¼ˆç™½åå•ï¼‰
   allowed_commands:
     - "ls"
     - "cd"
@@ -413,230 +267,162 @@ security:
     - "git"
     - "npm"
     - "python"
-    - "make"
+    - "node"
     - "docker"
     - "kubectl"
     
-  # å‘½ä»¤é»‘åå•
+  # ç¦æ­¢çš„å‘½ä»¤ï¼ˆé»‘åå•ï¼‰
   blocked_commands:
     - "rm -rf /"
     - "sudo rm"
     - "mkfs"
     - "dd if="
-    - ":(){ :|:& };:"
-    
-  # å‘½ä»¤æ¨¡å¼è¿‡æ»¤
-  blocked_patterns:
-    - "rm.*-rf.*/"
-    - "sudo.*rm"
-    - "chmod.*777"
+    - "shutdown"
+    - "reboot"
     
-  # æ‰§è¡Œé™åˆ¶
+  # å‘½ä»¤è¶…æ—¶ï¼ˆç§’ï¼‰
   command_timeout: 300
-  max_output_size: 10485760  # 10MB
-  max_concurrent_commands: 10
   
-  # æ–‡ä»¶è®¿é—®é™åˆ¶
-  allowed_paths:
-    - "/home"
-    - "/tmp"
-    - "/var/log"
-    
-  blocked_paths:
-    - "/etc/passwd"
-    - "/etc/shadow"
-    - "/root"
-
-# ç›‘æ§é…ç½®
-monitoring:
-  metrics:
-    enabled: true
-    port: 9090
-    path: /metrics
-    
-  health_check:
-    enabled: true
-    port: 8083
-    path: /health
-    
-  logging:
-    level: INFO
-    format: json
-    file: /var/log/cursor-bridge.log
-    max_size: 100MB
-    backup_count: 5
-    
-  alerts:
-    connection_failure_threshold: 3
-    command_timeout_threshold: 5
-    error_rate_threshold: 0.1
-
-# æ€§èƒ½é…ç½®
-performance:
-  connection_pool:
-    max_size: 20
-    min_size: 2
-    max_idle_time: 300
-    
-  session_pool:
-    max_sessions_per_server: 10
-    session_idle_timeout: 600
-    
-  command_execution:
-    default_timeout: 30
-    max_timeout: 300
-    buffer_size: 8192
-    
-  caching:
-    command_history_size: 1000
-    session_cache_ttl: 3600
+  # æœ€å¤§è¾“å‡ºå¤§å°ï¼ˆå­—èŠ‚ï¼‰
+  max_output_size: 10485760  # 10MB
 ```
 
-## éƒ¨ç½²æŒ‡å—
+## ğŸ“‹ CLIå‘½ä»¤å‚è€ƒ
 
-### Dockeréƒ¨ç½²
+### åŸºæœ¬å‘½ä»¤
 
 ```bash
-# æ„å»ºé•œåƒ
-docker build -t cursor-bridge .
-
-# è¿è¡Œå®¹å™¨
-docker run -d \
-  --name cursor-bridge \
-  -p 8082:8082 \
-  -v $(pwd)/config:/app/config \
-  -v ~/.ssh:/root/.ssh:ro \
-  cursor-bridge
-```
+# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ¯æ¬¡ä½¿ç”¨å‰ï¼‰
+export PYTHONPATH=$PWD/src:$PYTHONPATH
 
-### ç³»ç»ŸæœåŠ¡éƒ¨ç½²
+# æŸ¥çœ‹ç‰ˆæœ¬
+python3 -m cursor_bridge.cli version
 
-```bash
-# å®‰è£…ä¸ºsystemdæœåŠ¡
-sudo cp scripts/cursor-bridge.service /etc/systemd/system/
-sudo systemctl daemon-reload
-sudo systemctl enable cursor-bridge
-sudo systemctl start cursor-bridge
-```
+# æŸ¥çœ‹å¸®åŠ©
+python3 -m cursor_bridge.cli --help
 
-### Kuberneteséƒ¨ç½²
+# ç”Ÿæˆé…ç½®æ–‡ä»¶
+python3 -m cursor_bridge.cli init-config
 
-```yaml
-# k8s/deployment.yaml
-apiVersion: apps/v1
-kind: Deployment
-metadata:
-  name: cursor-bridge
-spec:
-  replicas: 2
-  selector:
-    matchLabels:
-      app: cursor-bridge
-  template:
-    metadata:
-      labels:
-        app: cursor-bridge
-    spec:
-      containers:
-      - name: cursor-bridge
-        image: cursor-bridge:latest
-        ports:
-        - containerPort: 8082
-        volumeMounts:
-        - name: config
-          mountPath: /app/config
-      volumes:
-      - name: config
-        configMap:
-          name: cursor-bridge-config
-```
+# æŸ¥çœ‹å½“å‰é…ç½®
+python3 -m cursor_bridge.cli config
+
+# æµ‹è¯•è¿æ¥
+python3 -m cursor_bridge.cli ping
 
-## ç›‘æ§å’Œè¿ç»´
+# æ£€æŸ¥å¥åº·çŠ¶æ€
+python3 -m cursor_bridge.cli health
+```
 
-### å¥åº·æ£€æŸ¥
+### æœåŠ¡ç®¡ç†
 
 ```bash
-# æ£€æŸ¥æœåŠ¡çŠ¶æ€
-curl http://localhost:8083/health
+# å¯åŠ¨ä¸»æœåŠ¡å™¨
+python3 -m cursor_bridge.cli start --config cursor_bridge_config.local.yaml
 
-# æ£€æŸ¥è¿æ¥çŠ¶æ€
-curl http://localhost:8083/connections
+# å¯åŠ¨MCPæœåŠ¡å™¨ï¼ˆCursoré›†æˆï¼‰
+python3 -m cursor_bridge.cli mcp --config cursor_bridge_config.local.yaml
 
-# æ£€æŸ¥ä¼šè¯çŠ¶æ€
-curl http://localhost:8083/sessions
+# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
+python3 -m cursor_bridge.cli start -c /path/to/config.yaml
 ```
 
-### ç›‘æ§æŒ‡æ ‡
+## ğŸ”§ æ•…éšœæ’é™¤
+
+### å¸¸è§é—®é¢˜
+
+#### 1. "No tools available" é”™è¯¯
+
+**åŸå› **ï¼šCursoræ— æ³•è¿æ¥åˆ°MCPæœåŠ¡å™¨
 
+**è§£å†³æ–¹æ¡ˆ**ï¼š
 ```bash
-# PrometheusæŒ‡æ ‡
-curl http://localhost:9090/metrics
+# æ£€æŸ¥MCPæœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å¯åŠ¨
+export PYTHONPATH=$PWD/src:$PYTHONPATH
+python3 -m cursor_bridge.cli mcp --config cursor_bridge_config.local.yaml
+
+# æ£€æŸ¥Cursoré…ç½®æ˜¯å¦æ­£ç¡®
+cat cursor_mcp_config.json
+
+# é‡å¯Cursor IDE
 ```
 
-ä¸»è¦æŒ‡æ ‡ï¼š
-- `cursor_bridge_connections_total`: æ€»è¿æ¥æ•°
-- `cursor_bridge_commands_total`: æ€»å‘½ä»¤æ‰§è¡Œæ•°
-- `cursor_bridge_command_duration_seconds`: å‘½ä»¤æ‰§è¡Œæ—¶é—´
-- `cursor_bridge_errors_total`: é”™è¯¯æ€»æ•°
-- `cursor_bridge_sessions_active`: æ´»è·ƒä¼šè¯æ•°
+#### 2. SSHè¿æ¥å¤±è´¥
 
-### æ—¥å¿—åˆ†æ
+**åŸå› **ï¼šæœåŠ¡å™¨é…ç½®é”™è¯¯æˆ–ç½‘ç»œé—®é¢˜
 
+**è§£å†³æ–¹æ¡ˆ**ï¼š
 ```bash
-# æŸ¥çœ‹å®æ—¶æ—¥å¿—
-tail -f /var/log/cursor-bridge.log
+# æ‰‹åŠ¨æµ‹è¯•SSHè¿æ¥
+ssh -i ~/.ssh/your_key user@your-server.com
 
-# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
-grep ERROR /var/log/cursor-bridge.log
+# æ£€æŸ¥SSHå¯†é’¥æƒé™
+chmod 600 ~/.ssh/your_key
 
-# æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œæ—¥å¿—
-grep "command_executed" /var/log/cursor-bridge.log
+# æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„æœåŠ¡å™¨ä¿¡æ¯
 ```
 
-## æ•…éšœæ’é™¤
+#### 3. ä¼ä¸šVPNå·¥å…·æ— æ³•è¿æ¥
 
-### å¸¸è§é—®é¢˜
+**åŸå› **ï¼šVPNå·¥å…·é…ç½®é”™è¯¯
 
-#### 1. è¿æ¥å¤±è´¥
+**è§£å†³æ–¹æ¡ˆ**ï¼š
 ```bash
-# æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
-ping target-server.com
+# æ‰‹åŠ¨æµ‹è¯•VPNå·¥å…·
+your-vpn-tool --test
 
-# æ£€æŸ¥SSHè¿æ¥
-ssh -v user@target-server.com
+# æ£€æŸ¥VPNå·¥å…·è·¯å¾„
+which your-vpn-tool
 
-# æ£€æŸ¥ä¼ä¸šVPNå·¥å…·
-enterprise-vpn-tool --test
+# æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„commandè·¯å¾„
 ```
 
-#### 2. å‘½ä»¤æ‰§è¡Œè¶…æ—¶
-```yaml
-# è°ƒæ•´è¶…æ—¶é…ç½®
-security:
-  command_timeout: 600  # å¢åŠ åˆ°10åˆ†é’Ÿ
-```
+#### 4. æƒé™é”™è¯¯
 
-#### 3. ä¼šè¯ä¸¢å¤±
+**åŸå› **ï¼šSSHå¯†é’¥æˆ–é…ç½®æ–‡ä»¶æƒé™é—®é¢˜
+
+**è§£å†³æ–¹æ¡ˆ**ï¼š
 ```bash
-# æ£€æŸ¥tmuxä¼šè¯
-tmux list-sessions
+# ä¿®å¤SSHå¯†é’¥æƒé™
+chmod 600 ~/.ssh/your_key
+chmod 644 ~/.ssh/your_key.pub
 
-# é‡æ–°åˆ›å»ºä¼šè¯
-curl -X POST http://localhost:8082/sessions/recreate
+# ä¿®å¤é…ç½®æ–‡ä»¶æƒé™
+chmod 600 cursor_bridge_config.local.yaml
 ```
 
 ### è°ƒè¯•æ¨¡å¼
 
 ```bash
-# å¯ç”¨è°ƒè¯•æ—¥å¿—
+# å¯ç”¨è¯¦ç»†æ—¥å¿—
 export LOG_LEVEL=DEBUG
-python -m cursor_bridge.server
+python3 -m cursor_bridge.cli mcp --config cursor_bridge_config.local.yaml
 
-# å¯ç”¨è¯¦ç»†è¾“å‡º
-python -m cursor_bridge.server --verbose
+# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
+python3 -m cursor_bridge.cli health --verbose
 ```
 
-## è´¡çŒ®æŒ‡å—
+## ğŸ“ é¡¹ç›®ç»“æ„
+
+```
+cursor-bridge/
+â”œâ”€â”€ src/cursor_bridge/           # æ ¸å¿ƒä»£ç 
+â”‚   â”œâ”€â”€ cli.py                  # CLIå·¥å…·
+â”‚   â”œâ”€â”€ mcp_server.py           # MCPæœåŠ¡å™¨
+â”‚   â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
+â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
+â”œâ”€â”€ tests/                      # æµ‹è¯•ä»£ç 
+â”œâ”€â”€ cursor_bridge_config.yaml   # é…ç½®æ¨¡æ¿ï¼ˆæäº¤åˆ°gitï¼‰
+â”œâ”€â”€ cursor_bridge_config.local.yaml  # æœ¬åœ°é…ç½®ï¼ˆä¸æäº¤ï¼‰
+â”œâ”€â”€ cursor_mcp_config.json      # Cursor MCPé…ç½®
+â”œâ”€â”€ install.sh                  # è‡ªåŠ¨å®‰è£…è„šæœ¬
+â”œâ”€â”€ start_cursor_bridge.sh      # å¯åŠ¨è„šæœ¬
+â”œâ”€â”€ requirements.txt            # ä¾èµ–åˆ—è¡¨
+â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
+â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
+```
+
+## ğŸ¤ è´¡çŒ®æŒ‡å—
 
 ### æäº¤ä»£ç 
 
@@ -646,73 +432,51 @@ python -m cursor_bridge.server --verbose
 4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
 5. åˆ›å»ºPull Request
 
-### ä»£ç è§„èŒƒ
+### å¼€å‘ç¯å¢ƒ
+
+```bash
+# å®‰è£…å¼€å‘ä¾èµ–
+pip3 install -r requirements.txt
+pip3 install pytest black isort mypy
 
-- ä½¿ç”¨Blackè¿›è¡Œä»£ç æ ¼å¼åŒ–
-- ä½¿ç”¨isortè¿›è¡Œå¯¼å…¥æ’åº
-- ä½¿ç”¨mypyè¿›è¡Œç±»å‹æ£€æŸ¥
-- ç¼–å†™å•å…ƒæµ‹è¯•
-- æ›´æ–°æ–‡æ¡£
+# è¿è¡Œæµ‹è¯•
+pytest tests/
 
-### æŠ¥å‘Šé—®é¢˜
+# ä»£ç æ ¼å¼åŒ–
+black src/ tests/
+isort src/ tests/
 
-è¯·ä½¿ç”¨GitHub IssuesæŠ¥å‘Šé—®é¢˜ï¼ŒåŒ…å«ï¼š
-- é—®é¢˜æè¿°
-- å¤ç°æ­¥éª¤
-- æœŸæœ›è¡Œä¸º
-- å®é™…è¡Œä¸º
-- ç¯å¢ƒä¿¡æ¯
+# ç±»å‹æ£€æŸ¥
+mypy src/
+```
 
-## å¼€å‘çŠ¶æ€
+## ğŸ“ˆ å¼€å‘çŠ¶æ€
 
 ### âœ… å·²å®Œæˆ (v0.1.0)
 - [x] åŸºç¡€MCPæœåŠ¡å™¨æ¡†æ¶
 - [x] é…ç½®ç®¡ç†ç³»ç»Ÿ
-- [x] æ—¥å¿—ç³»ç»Ÿ
-- [x] CLIå·¥å…·
-- [x] å¥åº·æ£€æŸ¥å’Œç›‘æ§
+- [x] CLIå·¥å…·å®Œæ•´å®ç°
+- [x] Cursor IDEè‡ªåŠ¨é›†æˆ
 - [x] è‡ªåŠ¨å®‰è£…è„šæœ¬
+- [x] åŸºæœ¬å®‰å…¨è¿‡æ»¤
 
 ### ğŸ”„ å¼€å‘ä¸­ (v0.2.0)
-- [ ] è¿æ¥ç­–ç•¥å®ç°
-- [ ] SSHè¿æ¥ç®¡ç†
+- [ ] SSHè¿æ¥ç®¡ç†å™¨
 - [ ] ä¼ä¸šVPNå·¥å…·é›†æˆ
 - [ ] tmuxä¼šè¯ç®¡ç†
-- [ ] åŸºæœ¬å‘½ä»¤æ‰§è¡Œ
+- [ ] å‘½ä»¤æ‰§è¡Œå™¨ä¼˜åŒ–
 
 ### ğŸ“‹ è®¡åˆ’ä¸­ (v1.0)
-- [ ] å®Œæ•´MCPå·¥å…·å®ç°
-- [ ] Cursor IDEé›†æˆ
-
-### v1.1
 - [ ] å¤šæœåŠ¡å™¨æ”¯æŒ
-- [ ] å‘½ä»¤å®‰å…¨è¿‡æ»¤
-- [ ] æ€§èƒ½ä¼˜åŒ–
-- [ ] ç›‘æ§é¢æ¿
-
-### v1.2
+- [ ] ä¼šè¯æŒä¹…åŒ–
 - [ ] äº¤äº’å¼å‘½ä»¤æ”¯æŒ
-- [ ] ä¼šè¯å…±äº«
-- [ ] æ’ä»¶ç³»ç»Ÿ
-- [ ] Webç•Œé¢
-
-### v2.0
-- [ ] åˆ†å¸ƒå¼éƒ¨ç½²
-- [ ] é«˜å¯ç”¨æ¶æ„
-- [ ] ä¼ä¸šçº§å®‰å…¨
-- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
+- [ ] Webç®¡ç†ç•Œé¢
 
-## è®¸å¯è¯
+## ğŸ“„ è®¸å¯è¯
 
 æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚
 
-## è‡´è°¢
-
-- [Model Context Protocol](https://github.com/modelcontextprotocol) - MCPåè®®æ”¯æŒ
-- [Cursor IDE](https://cursor.sh/) - ä¼˜ç§€çš„AIä»£ç ç¼–è¾‘å™¨
-- [tmux](https://github.com/tmux/tmux) - ç»ˆç«¯å¤ç”¨å™¨
-
-## è”ç³»æˆ‘ä»¬
+## ğŸ“ è”ç³»æˆ‘ä»¬
 
 - é¡¹ç›®ä¸»é¡µ: https://github.com/maricoxu/cursor-bridge
 - é—®é¢˜åé¦ˆ: https://github.com/maricoxu/cursor-bridge/issues
diff --git a/cursor_bridge_config.yaml b/cursor_bridge_config.yaml
index 89c11ca..a06857e 100644
--- a/cursor_bridge_config.yaml
+++ b/cursor_bridge_config.yaml
@@ -2,7 +2,25 @@
 
 # æœåŠ¡å™¨é…ç½®
 servers:
-  # ä¼ä¸šä»£ç†è¿æ¥ç¤ºä¾‹
+  # ä½ çš„å®é™…æœåŠ¡å™¨é…ç½® - è¯·ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯
+  my-server:
+    type: direct
+    ssh:
+      host: "your-server-ip-or-domain"  # æ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨IPæˆ–åŸŸå
+      port: 22                          # SSHç«¯å£ï¼Œé€šå¸¸æ˜¯22
+      username: "your-username"         # æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å
+      key_file: "~/.ssh/id_rsa"        # SSHç§é’¥æ–‡ä»¶è·¯å¾„
+      # password: "your-password"       # å¦‚æœä½¿ç”¨å¯†ç è®¤è¯ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶å¡«å†™
+      timeout: 10
+    session:
+      name: "my-dev-session"
+      working_directory: "/home/your-username"  # æ›¿æ¢ä¸ºä½ çš„å·¥ä½œç›®å½•
+      environment:
+        TERM: "xterm-256color"
+        LANG: "en_US.UTF-8"
+      shell: "/bin/bash"
+
+  # ä¼ä¸šä»£ç†è¿æ¥ç¤ºä¾‹ï¼ˆå¦‚æœéœ€è¦é€šè¿‡VPNæˆ–ä»£ç†ï¼‰
   enterprise-dev:
     type: proxy
     proxy:
diff --git a/cursor_mcp_config.json b/cursor_mcp_config.json
index ab1d358..0993fda 100644
--- a/cursor_mcp_config.json
+++ b/cursor_mcp_config.json
@@ -3,15 +3,17 @@
     "cursor-bridge": {
       "command": "python3",
       "args": [
-        "-m", 
-        "cursor_bridge.cli", 
-        "mcp", 
-        "--config", 
-        "/Users/xuyehua/Code/cursor-bridge/cursor_bridge_config.yaml"
+        "-m",
+        "cursor_bridge.cli",
+        "-c",
+        "/Users/xuyehua/Code/cursor-bridge/cursor_bridge_config.local.yaml",
+        "mcp"
       ],
       "env": {
         "PYTHONPATH": "/Users/xuyehua/Code/cursor-bridge/src"
-      }
+      },
+      "disabled": false,
+      "autoApprove": true
     }
   }
 }
diff --git a/install.sh b/install.sh
index 9ab2395..f5e29e7 100755
--- a/install.sh
+++ b/install.sh
@@ -88,6 +88,17 @@ setup_config() {
     else
         log_warning "é…ç½®æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·³è¿‡ç”Ÿæˆ"
     fi
+    
+    # åˆ›å»ºæœ¬åœ°é…ç½®æ–‡ä»¶
+    if [ ! -f "cursor_bridge_config.local.yaml" ]; then
+        log_info "åˆ›å»ºæœ¬åœ°é…ç½®æ–‡ä»¶..."
+        cp cursor_bridge_config.yaml cursor_bridge_config.local.yaml
+        log_success "æœ¬åœ°é…ç½®æ–‡ä»¶å·²åˆ›å»º: cursor_bridge_config.local.yaml"
+        log_warning "è¯·ç¼–è¾‘ cursor_bridge_config.local.yaml æ–‡ä»¶ï¼Œé…ç½®ä½ çš„å®é™…æœåŠ¡å™¨ä¿¡æ¯"
+        log_info "æœ¬åœ°é…ç½®æ–‡ä»¶ä¸ä¼šè¢«æäº¤åˆ°gitï¼Œä¿æŠ¤ä½ çš„æ•æ„Ÿä¿¡æ¯"
+    else
+        log_warning "æœ¬åœ°é…ç½®æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º"
+    fi
 }
 
 # è¿è¡Œæµ‹è¯•
@@ -123,8 +134,21 @@ create_start_script() {
 # è®¾ç½®Pythonè·¯å¾„
 export PYTHONPATH=$PWD/src:$PYTHONPATH
 
+# æ£€æŸ¥é…ç½®æ–‡ä»¶
+if [ -f "cursor_bridge_config.local.yaml" ]; then
+    CONFIG_FILE="cursor_bridge_config.local.yaml"
+    echo "ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶: $CONFIG_FILE"
+elif [ -f "cursor_bridge_config.yaml" ]; then
+    CONFIG_FILE="cursor_bridge_config.yaml"
+    echo "ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶: $CONFIG_FILE"
+else
+    echo "é”™è¯¯: æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶"
+    exit 1
+fi
+
 # å¯åŠ¨æœåŠ¡å™¨
-python3 -m cursor_bridge.cli start --config cursor_bridge_config.yaml
+echo "å¯åŠ¨Cursor BridgeæœåŠ¡å™¨..."
+python3 -m cursor_bridge.cli start --config "$CONFIG_FILE" "$@"
 EOF
 
     chmod +x start_cursor_bridge.sh
@@ -137,56 +161,231 @@ create_cursor_config() {
     
     current_dir=$(pwd)
     
+    # ç¡®å®šä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶
+    if [ -f "cursor_bridge_config.local.yaml" ]; then
+        config_file="cursor_bridge_config.local.yaml"
+        log_info "ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶: $config_file"
+    else
+        config_file="cursor_bridge_config.yaml"
+        log_info "ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶: $config_file"
+    fi
+    
     cat > cursor_mcp_config.json << EOF
 {
   "mcpServers": {
     "cursor-bridge": {
       "command": "python3",
       "args": [
-        "-m", 
-        "cursor_bridge.cli", 
-        "mcp", 
-        "--config", 
-        "${current_dir}/cursor_bridge_config.yaml"
+        "-m",
+        "cursor_bridge.cli",
+        "-c",
+        "${current_dir}/${config_file}",
+        "mcp"
       ],
       "env": {
         "PYTHONPATH": "${current_dir}/src"
-      }
+      },
+      "disabled": false,
+      "autoApprove": true
     }
   }
 }
 EOF
 
     log_success "Cursor MCPé…ç½®å·²ç”Ÿæˆ: cursor_mcp_config.json"
+    log_info "é…ç½®æ–‡ä»¶è·¯å¾„: ${current_dir}/${config_file}"
+}
+
+# è‡ªåŠ¨é…ç½®Cursor MCP
+auto_configure_cursor() {
+    log_info "è‡ªåŠ¨é…ç½®Cursor MCP..."
+    
+    cursor_config_file="$HOME/.cursor/mcp.json"
+    current_dir=$(pwd)
+    
+    # ç¡®å®šä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶
+    if [ -f "cursor_bridge_config.local.yaml" ]; then
+        config_file="cursor_bridge_config.local.yaml"
+        log_info "ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶: $config_file"
+    else
+        config_file="cursor_bridge_config.yaml"
+        log_info "ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶: $config_file"
+    fi
+    
+    # æ£€æŸ¥Cursoré…ç½®ç›®å½•æ˜¯å¦å­˜åœ¨
+    if [ ! -d "$HOME/.cursor" ]; then
+        log_warning "Cursoré…ç½®ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•: $HOME/.cursor"
+        mkdir -p "$HOME/.cursor"
+    fi
+    
+    # æ£€æŸ¥æ˜¯å¦å·²å®‰è£…jqï¼ˆç”¨äºJSONå¤„ç†ï¼‰
+    if ! command -v jq &> /dev/null; then
+        log_warning "jqæœªå®‰è£…ï¼Œä½¿ç”¨Pythonè¿›è¡ŒJSONå¤„ç†"
+        
+        # ä½¿ç”¨Pythonè„šæœ¬å¤„ç†JSONé…ç½®
+        python3 << EOF
+import json
+import os
+
+config_file_path = "$cursor_config_file"
+current_dir = "$current_dir"
+config_file = "$config_file"
+
+# cursor-bridgeé…ç½®
+cursor_bridge_config = {
+    "command": "python3",
+    "args": [
+        "-m",
+        "cursor_bridge.cli",
+        "-c",
+        f"{current_dir}/{config_file}",
+        "mcp"
+    ],
+    "env": {
+        "PYTHONPATH": f"{current_dir}/src"
+    },
+    "disabled": False,
+    "autoApprove": True
+}
+
+# è¯»å–ç°æœ‰é…ç½®æˆ–åˆ›å»ºæ–°é…ç½®
+if os.path.exists(config_file_path):
+    try:
+        with open(config_file_path, 'r') as f:
+            config = json.load(f)
+    except (json.JSONDecodeError, FileNotFoundError):
+        config = {"mcpServers": {}}
+else:
+    config = {"mcpServers": {}}
+
+# ç¡®ä¿mcpServerså­˜åœ¨
+if "mcpServers" not in config:
+    config["mcpServers"] = {}
+
+# æ£€æŸ¥cursor-bridgeæ˜¯å¦å·²å­˜åœ¨
+if "cursor-bridge" in config["mcpServers"]:
+    print("cursor-bridgeé…ç½®å·²å­˜åœ¨ï¼Œæ›´æ–°é…ç½®...")
+else:
+    print("æ·»åŠ cursor-bridgeé…ç½®...")
+
+# æ·»åŠ æˆ–æ›´æ–°cursor-bridgeé…ç½®
+config["mcpServers"]["cursor-bridge"] = cursor_bridge_config
+
+# ä¿å­˜é…ç½®
+with open(config_file_path, 'w') as f:
+    json.dump(config, f, indent=2)
+
+print(f"é…ç½®å·²ä¿å­˜åˆ°: {config_file_path}")
+print(f"ä½¿ç”¨é…ç½®æ–‡ä»¶: {current_dir}/{config_file}")
+EOF
+        
+        if [ $? -eq 0 ]; then
+            log_success "Cursor MCPé…ç½®å·²è‡ªåŠ¨æ·»åŠ åˆ°: $cursor_config_file"
+        else
+            log_error "è‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶cursor_mcp_config.jsonçš„å†…å®¹åˆ°Cursorè®¾ç½®ä¸­"
+            return 1
+        fi
+    else
+        # ä½¿ç”¨jqå¤„ç†JSON
+        if [ -f "$cursor_config_file" ]; then
+            # å¤‡ä»½ç°æœ‰é…ç½®
+            cp "$cursor_config_file" "$cursor_config_file.backup"
+            log_info "å·²å¤‡ä»½ç°æœ‰é…ç½®åˆ°: $cursor_config_file.backup"
+            
+            # æ›´æ–°é…ç½®
+            jq --arg current_dir "$current_dir" --arg config_file "$config_file" '
+                .mcpServers["cursor-bridge"] = {
+                    "command": "python3",
+                    "args": [
+                        "-m",
+                        "cursor_bridge.cli",
+                        "-c",
+                        ($current_dir + "/" + $config_file),
+                        "mcp"
+                    ],
+                    "env": {
+                        "PYTHONPATH": ($current_dir + "/src")
+                    },
+                    "disabled": false,
+                    "autoApprove": true
+                }
+            ' "$cursor_config_file" > "$cursor_config_file.tmp" && mv "$cursor_config_file.tmp" "$cursor_config_file"
+        else
+            # åˆ›å»ºæ–°é…ç½®æ–‡ä»¶
+            jq -n --arg current_dir "$current_dir" --arg config_file "$config_file" '{
+                "mcpServers": {
+                    "cursor-bridge": {
+                        "command": "python3",
+                        "args": [
+                            "-m",
+                            "cursor_bridge.cli",
+                            "-c",
+                            ($current_dir + "/" + $config_file),
+                            "mcp"
+                        ],
+                        "env": {
+                            "PYTHONPATH": ($current_dir + "/src")
+                        },
+                        "disabled": false,
+                        "autoApprove": true
+                    }
+                }
+            }' > "$cursor_config_file"
+        fi
+        
+        log_success "Cursor MCPé…ç½®å·²è‡ªåŠ¨æ·»åŠ åˆ°: $cursor_config_file"
+    fi
+    
+    log_info "è¯·é‡å¯Cursor IDEä»¥ä½¿é…ç½®ç”Ÿæ•ˆ"
 }
 
 # æ˜¾ç¤ºä½¿ç”¨è¯´æ˜
 show_usage() {
     log_success "ğŸ‰ Cursor Bridge å®‰è£…å®Œæˆï¼"
     echo ""
-    echo "ğŸ“‹ ä½¿ç”¨è¯´æ˜:"
-    echo "  1. ç¼–è¾‘é…ç½®æ–‡ä»¶: cursor_bridge_config.yaml"
-    echo "  2. å¯åŠ¨æœåŠ¡å™¨: ./start_cursor_bridge.sh"
-    echo "  3. æˆ–æ‰‹åŠ¨å¯åŠ¨: PYTHONPATH=\$PWD/src python3 -m cursor_bridge.cli start"
+    echo "ğŸ“‹ é…ç½®æ­¥éª¤:"
+    echo "  1. ğŸ“ ç¼–è¾‘æœ¬åœ°é…ç½®æ–‡ä»¶: cursor_bridge_config.local.yaml"
+    echo "     - é…ç½®ä½ çš„æœåŠ¡å™¨è¿æ¥ä¿¡æ¯ï¼ˆIPã€ç”¨æˆ·åã€SSHå¯†é’¥ç­‰ï¼‰"
+    echo "     - æœ¬åœ°é…ç½®æ–‡ä»¶ä¸ä¼šè¢«æäº¤åˆ°gitï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯"
+    echo "  2. ğŸš€ å¯åŠ¨æœåŠ¡å™¨: ./start_cursor_bridge.sh"
+    echo "  3. ğŸ”„ é‡å¯Cursor IDEä»¥ä½¿MCPé…ç½®ç”Ÿæ•ˆ"
     echo ""
     echo "ğŸ”— Cursor IDE é›†æˆ:"
-    echo "  1. æ‰“å¼€ Cursor IDE è®¾ç½®"
-    echo "  2. æ‰¾åˆ° 'MCP Servers' é…ç½®"
-    echo "  3. å¤åˆ¶ cursor_mcp_config.json çš„å†…å®¹åˆ°é…ç½®ä¸­"
-    echo "  4. é‡å¯ Cursor IDE"
-    echo "  5. åœ¨ Cursor ä¸­å°±å¯ä»¥ä½¿ç”¨ cursor-bridge å·¥å…·äº†ï¼"
+    echo "  âœ… MCPé…ç½®å·²è‡ªåŠ¨æ·»åŠ åˆ°Cursor"
+    echo "  ğŸ”„ è¯·é‡å¯Cursor IDEä»¥ä½¿é…ç½®ç”Ÿæ•ˆ"
+    echo "  ğŸ¯ é‡å¯åå³å¯åœ¨Cursorä¸­ä½¿ç”¨cursor-bridgeå·¥å…·ï¼"
+    echo ""
+    echo "ğŸ› ï¸ å¯ç”¨çš„MCPå·¥å…·:"
+    echo "  - execute_command: åœ¨è¿œç¨‹æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤"
+    echo "  - list_sessions: åˆ—å‡ºæ´»è·ƒä¼šè¯"
+    echo "  - create_session: åˆ›å»ºæ–°ä¼šè¯"
+    echo "  - destroy_session: é”€æ¯ä¼šè¯"
+    echo "  - get_session_status: è·å–ä¼šè¯çŠ¶æ€"
     echo ""
     echo "ğŸ”§ é…ç½®è¯´æ˜:"
-    echo "  - é…ç½®æ–‡ä»¶åŒ…å«æœåŠ¡å™¨è¿æ¥ä¿¡æ¯"
+    echo "  - ğŸ“ é…ç½®æ¨¡æ¿: cursor_bridge_config.yamlï¼ˆæäº¤åˆ°gitï¼‰"
+    echo "  - ğŸ”’ æœ¬åœ°é…ç½®: cursor_bridge_config.local.yamlï¼ˆä¸æäº¤åˆ°gitï¼‰"
     echo "  - æ”¯æŒç›´æ¥SSHè¿æ¥å’Œä¼ä¸šä»£ç†è¿æ¥"
     echo "  - è¯¦ç»†é…ç½®è¯·å‚è€ƒ README.md"
     echo ""
-    echo "ğŸ§ª æµ‹è¯•MCPæœåŠ¡å™¨:"
+    echo "ğŸ¯ åœ¨Cursorä¸­ä½¿ç”¨:"
+    echo "  é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ç›´æ¥å‘Šè¯‰Cursor AIï¼š"
+    echo "  - \"è¯·åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹å½“å‰ç›®å½•çš„æ–‡ä»¶\""
+    echo "  - \"å¸®æˆ‘åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ git status\""
+    echo "  - \"åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå®‰è£… npm ä¾èµ–\""
+    echo ""
+    echo "ğŸ§ª æµ‹è¯•å‘½ä»¤:"
     echo "  - æµ‹è¯•MCP: PYTHONPATH=\$PWD/src python3 -m cursor_bridge.cli mcp"
+    echo "  - æµ‹è¯•è¿æ¥: PYTHONPATH=\$PWD/src python3 -m cursor_bridge.cli ping"
     echo ""
     echo "ğŸ“š æ›´å¤šå¸®åŠ©:"
     echo "  - æŸ¥çœ‹å¸®åŠ©: PYTHONPATH=\$PWD/src python3 -m cursor_bridge.cli --help"
     echo "  - é¡¹ç›®æ–‡æ¡£: https://github.com/maricoxu/cursor-bridge"
+    echo ""
+    echo "âš ï¸  é‡è¦æé†’:"
+    echo "  - è¯·ç¼–è¾‘ cursor_bridge_config.local.yaml é…ç½®ä½ çš„æœåŠ¡å™¨ä¿¡æ¯"
+    echo "  - æœ¬åœ°é…ç½®æ–‡ä»¶å·²æ·»åŠ åˆ°.gitignoreï¼Œä¸ä¼šè¢«æäº¤åˆ°git"
+    echo "  - å¦‚æœè‡ªåŠ¨é…ç½®å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶cursor_mcp_config.jsonçš„å†…å®¹åˆ°Cursorè®¾ç½®ä¸­"
 }
 
 # ä¸»å®‰è£…æµç¨‹
@@ -213,6 +412,9 @@ main() {
     # ç”ŸæˆCursoré…ç½®
     create_cursor_config
     
+    # è‡ªåŠ¨é…ç½®Cursor MCP
+    auto_configure_cursor
+    
     # æ˜¾ç¤ºä½¿ç”¨è¯´æ˜
     show_usage
 }
diff --git a/src/cursor_bridge/mcp_server.py b/src/cursor_bridge/mcp_server.py
index c094a6e..9e56b51 100644
--- a/src/cursor_bridge/mcp_server.py
+++ b/src/cursor_bridge/mcp_server.py
@@ -226,7 +226,11 @@ class SimpleMCPHandler:
         request_id = request.get("id")
         
         try:
-            if method == "tools/list":
+            if method == "initialize":
+                return await self._handle_initialize(request_id, params)
+            elif method == "initialized":
+                return await self._handle_initialized(request_id)
+            elif method == "tools/list":
                 return await self._handle_tools_list(request_id)
             elif method == "tools/call":
                 return await self._handle_tools_call(request_id, params)
@@ -241,6 +245,29 @@ class SimpleMCPHandler:
             self.logger.error("å¤„ç†è¯·æ±‚å¤±è´¥", method=method, error=str(e))
             return self._error_response(request_id, -32603, f"Internal error: {str(e)}")
     
+    async def _handle_initialize(self, request_id: Any, params: Dict[str, Any]) -> Dict[str, Any]:
+        """å¤„ç†åˆå§‹åŒ–è¯·æ±‚"""
+        return {
+            "jsonrpc": "2.0",
+            "id": request_id,
+            "result": {
+                "protocolVersion": "2024-11-05",
+                "capabilities": {
+                    "tools": {},
+                    "resources": {}
+                },
+                "serverInfo": {
+                    "name": "cursor-bridge",
+                    "version": "0.1.0"
+                }
+            }
+        }
+    
+    async def _handle_initialized(self, request_id: Any) -> Dict[str, Any]:
+        """å¤„ç†åˆå§‹åŒ–å®Œæˆé€šçŸ¥"""
+        # è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥ï¼Œä¸éœ€è¦è¿”å›å“åº”
+        return None
+    
     async def _handle_tools_list(self, request_id: Any) -> Dict[str, Any]:
         """å¤„ç†å·¥å…·åˆ—è¡¨è¯·æ±‚"""
         tools = [
@@ -529,18 +556,33 @@ async def run_stdio_server(config_path: Optional[str] = None):
     mcp_server = MCPServer(config_path)
     handler = SimpleMCPHandler(mcp_server)
     
+    # åˆ›å»ºå¼‚æ­¥stdin/stdout
+    loop = asyncio.get_event_loop()
+    reader = asyncio.StreamReader()
+    protocol = asyncio.StreamReaderProtocol(reader)
+    await loop.connect_read_pipe(lambda: protocol, sys.stdin)
+    
+    writer_transport, writer_protocol = await loop.connect_write_pipe(
+        asyncio.streams.FlowControlMixin, sys.stdout
+    )
+    writer = asyncio.StreamWriter(writer_transport, writer_protocol, reader, loop)
+    
+    logger.info("MCPæœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç­‰å¾…è¯·æ±‚...")
+    
     # å¤„ç†stdioé€šä¿¡
-    while True:
-        try:
-            # ä»stdinè¯»å–è¯·æ±‚
-            line = await asyncio.get_event_loop().run_in_executor(None, sys.stdin.readline)
+    try:
+        while True:
+            # ä»stdinè¯»å–ä¸€è¡Œ
+            line = await reader.readline()
             if not line:
                 break
                 
-            line = line.strip()
+            line = line.decode('utf-8').strip()
             if not line:
                 continue
             
+            logger.debug("æ”¶åˆ°è¯·æ±‚", line=line)
+            
             # è§£æJSONè¯·æ±‚
             try:
                 request = json.loads(line)
@@ -551,13 +593,17 @@ async def run_stdio_server(config_path: Optional[str] = None):
             # å¤„ç†è¯·æ±‚
             response = await handler.handle_request(request)
             
-            # å‘é€å“åº”åˆ°stdout
-            response_line = json.dumps(response, ensure_ascii=False)
-            print(response_line, flush=True)
+            # å‘é€å“åº”åˆ°stdoutï¼ˆå¦‚æœæœ‰å“åº”çš„è¯ï¼‰
+            if response is not None:
+                response_line = json.dumps(response, ensure_ascii=False) + '\n'
+                writer.write(response_line.encode('utf-8'))
+                await writer.drain()
+                logger.debug("å‘é€å“åº”", response=response_line.strip())
             
-        except Exception as e:
-            logger.error("å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯", error=str(e))
-            break
+    except Exception as e:
+        logger.error("å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯", error=str(e))
+    finally:
+        writer.close()
     
     logger.info("MCPæœåŠ¡å™¨å…³é—­")
 
diff --git a/start_cursor_bridge.sh b/start_cursor_bridge.sh
index cdd231a..711fdd6 100755
--- a/start_cursor_bridge.sh
+++ b/start_cursor_bridge.sh
@@ -5,5 +5,18 @@
 # è®¾ç½®Pythonè·¯å¾„
 export PYTHONPATH=$PWD/src:$PYTHONPATH
 
+# æ£€æŸ¥é…ç½®æ–‡ä»¶
+if [ -f "cursor_bridge_config.local.yaml" ]; then
+    CONFIG_FILE="cursor_bridge_config.local.yaml"
+    echo "ä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶: $CONFIG_FILE"
+elif [ -f "cursor_bridge_config.yaml" ]; then
+    CONFIG_FILE="cursor_bridge_config.yaml"
+    echo "ä½¿ç”¨é»˜è®¤é…ç½®æ–‡ä»¶: $CONFIG_FILE"
+else
+    echo "é”™è¯¯: æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶"
+    exit 1
+fi
+
 # å¯åŠ¨æœåŠ¡å™¨
-python3 -m cursor_bridge.cli start --config cursor_bridge_config.yaml
+echo "å¯åŠ¨Cursor BridgeæœåŠ¡å™¨..."
+python3 -m cursor_bridge.cli start --config "$CONFIG_FILE" "$@"
diff --git a/test_mcp.py b/test_mcp.py
new file mode 100644
index 0000000..0d8a378
--- /dev/null
+++ b/test_mcp.py
@@ -0,0 +1,109 @@
+#!/usr/bin/env python3
+
+import sys
+import subprocess
+import json
+import time
+import os
+
+# è®¾ç½®ç¯å¢ƒ
+os.environ['PYTHONPATH'] = f"{os.getcwd()}/src"
+
+def test_mcp_server():
+    """æµ‹è¯•MCPæœåŠ¡å™¨"""
+    print("ğŸ§ª æµ‹è¯•MCPæœåŠ¡å™¨...")
+    
+    # å¯åŠ¨MCPæœåŠ¡å™¨
+    proc = subprocess.Popen(
+        [sys.executable, '-m', 'cursor_bridge.cli', 'mcp'], 
+        stdin=subprocess.PIPE, 
+        stdout=subprocess.PIPE, 
+        stderr=subprocess.PIPE,
+        text=True
+    )
+    
+    try:
+        # æµ‹è¯•åˆå§‹åŒ–
+        print("ğŸ“¡ å‘é€initializeè¯·æ±‚...")
+        init_request = {
+            "jsonrpc": "2.0",
+            "id": 1,
+            "method": "initialize",
+            "params": {
+                "protocolVersion": "2024-11-05",
+                "capabilities": {},
+                "clientInfo": {"name": "test", "version": "1.0"}
+            }
+        }
+        
+        proc.stdin.write(json.dumps(init_request) + '\n')
+        proc.stdin.flush()
+        
+        # ç­‰å¾…ä¸€ä¸‹è®©æœåŠ¡å™¨å¤„ç†
+        time.sleep(1)
+        
+        # è¯»å–å“åº”
+        response_line = proc.stdout.readline()
+        if response_line:
+            response = json.loads(response_line.strip())
+            print("âœ… åˆå§‹åŒ–å“åº”:", json.dumps(response, indent=2))
+        else:
+            print("âŒ æ— åˆå§‹åŒ–å“åº”")
+            # æ£€æŸ¥é”™è¯¯è¾“å‡º
+            stderr_output = proc.stderr.read()
+            if stderr_output:
+                print("é”™è¯¯è¾“å‡º:", stderr_output)
+            # æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿˜åœ¨è¿è¡Œ
+            if proc.poll() is not None:
+                print(f"è¿›ç¨‹å·²é€€å‡ºï¼Œé€€å‡ºç : {proc.returncode}")
+            return False
+        
+        # å‘é€initializedé€šçŸ¥
+        print("ğŸ“¡ å‘é€initializedé€šçŸ¥...")
+        initialized_request = {
+            "jsonrpc": "2.0",
+            "method": "initialized",
+            "params": {}
+        }
+        
+        proc.stdin.write(json.dumps(initialized_request) + '\n')
+        proc.stdin.flush()
+        
+        # æµ‹è¯•å·¥å…·åˆ—è¡¨
+        print("ğŸ“¡ å‘é€tools/listè¯·æ±‚...")
+        tools_request = {
+            "jsonrpc": "2.0",
+            "id": 2,
+            "method": "tools/list",
+            "params": {}
+        }
+        
+        proc.stdin.write(json.dumps(tools_request) + '\n')
+        proc.stdin.flush()
+        
+        # è¯»å–å·¥å…·åˆ—è¡¨å“åº”
+        response_line = proc.stdout.readline()
+        if response_line:
+            response = json.loads(response_line.strip())
+            tools = response.get('result', {}).get('tools', [])
+            print(f"âœ… å·¥å…·åˆ—è¡¨å“åº”: æ‰¾åˆ° {len(tools)} ä¸ªå·¥å…·")
+            for tool in tools:
+                print(f"   - {tool['name']}: {tool['description']}")
+        else:
+            print("âŒ æ— å·¥å…·åˆ—è¡¨å“åº”")
+            return False
+        
+        print("ğŸ‰ MCPæœåŠ¡å™¨æµ‹è¯•é€šè¿‡ï¼")
+        return True
+        
+    except Exception as e:
+        print(f"âŒ æµ‹è¯•å¤±è´¥: {e}")
+        return False
+    finally:
+        # ç»ˆæ­¢è¿›ç¨‹
+        proc.terminate()
+        proc.wait()
+
+if __name__ == "__main__":
+    success = test_mcp_server()
+    sys.exit(0 if success else 1) 
\ No newline at end of file
-- 
2.39.5 (Apple Git-154)

